"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");require("core-js/modules/es.reflect.construct.js"),require("core-js/modules/es.array.slice.js"),require("core-js/modules/es.symbol.iterator.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Uri=exports.SearchParams=exports.HashParams=void 0,require("core-js/modules/es.function.name.js"),require("core-js/modules/es.regexp.exec.js"),require("core-js/modules/es.string.split.js"),require("core-js/modules/es.array.splice.js"),require("core-js/modules/es.array.join.js"),require("core-js/modules/es.string.replace.js"),require("core-js/modules/es.array.iterator.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/es.string.iterator.js"),require("core-js/modules/web.dom-collections.iterator.js"),require("core-js/modules/web.url.js"),require("core-js/modules/web.url-search-params.js"),require("core-js/modules/es.array.from.js"),require("core-js/modules/es.object.entries.js"),require("core-js/modules/web.dom-collections.for-each.js"),require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.symbol.to-string-tag.js"),require("core-js/modules/es.json.to-string-tag.js"),require("core-js/modules/es.math.to-string-tag.js"),require("core-js/modules/es.symbol.js"),require("core-js/modules/es.symbol.description.js");var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits")),_possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn")),_getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf")),_wrapNativeSuper2=_interopRequireDefault(require("@babel/runtime/helpers/wrapNativeSuper")),_serialize=_interopRequireDefault(require("@trz/serialize")),_type=_interopRequireDefault(require("@trz/type"));function _createForOfIteratorHelper(a,b){var c="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!c){if(Array.isArray(a)||(c=_unsupportedIterableToArray(a))||b&&a&&"number"==typeof a.length){c&&(a=c);var d=0,e=function(){};return{s:e,n:function n(){return d>=a.length?{done:!0}:{done:!1,value:a[d++]}},e:function e(a){throw a},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,g=!0,h=!1;return{s:function s(){c=c.call(a)},n:function n(){var a=c.next();return g=a.done,a},e:function e(a){h=!0,f=a},f:function f(){try{g||null==c.return||c.return()}finally{if(h)throw f}}}}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function _createSuper(a){var b=_isNativeReflectConstruct();return function(){var c,d=(0,_getPrototypeOf2.default)(a);if(b){var e=(0,_getPrototypeOf2.default)(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return(0,_possibleConstructorReturn2.default)(this,c)}}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}var ParamsError=function(a){function b(a){var d,e;(0,_classCallCheck2.default)(this,b),e=c.call(this,a),e.name="ParamsError",e.message=a;var f=(null===(d=e.stack)||void 0===d?void 0:d.split("\n"))||[];return f.splice(1,2),e.stack=f.join("\n"),e}(0,_inherits2.default)(b,a);var c=_createSuper(b);return(0,_createClass2.default)(b)}((0,_wrapNativeSuper2.default)(Error)),SearchParams=function(a){function b(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return(0,_classCallCheck2.default)(this,b),c.call(this,("string"==typeof a?a:"").replace(/#.*$/i,"").replace(/^\?/i,""))}(0,_inherits2.default)(b,a);var c=_createSuper(b);return(0,_createClass2.default)(b,[{key:"toString",value:function toString(){var a=this.stringify();return a&&"?".concat(a)}}]),b}(_serialize.default);exports.SearchParams=SearchParams;var HashParams=function(a){function b(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"";return(0,_classCallCheck2.default)(this,b),c.call(this,("string"==typeof a?a:"").replace(/\?[^#]*/i,"").replace(/^#/i,""))}(0,_inherits2.default)(b,a);var c=_createSuper(b);return(0,_createClass2.default)(b,[{key:"toString",value:function toString(){var a=this.stringify();return a&&"#".concat(a)}}]),b}(_serialize.default);exports.HashParams=HashParams;var mergeUri=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=new URL(window.location.href);b=Array.from(b).reverse();var e,f=_createForOfIteratorHelper(b);try{for(f.s();!(e=f.n()).done;){var g=e.value;d=new URL(g,d)}}catch(a){f.e(a)}finally{f.f()}return d},Uri=function(a){function b(){return(0,_classCallCheck2.default)(this,b),c.call(this,mergeUri.apply(void 0,arguments))}(0,_inherits2.default)(b,a);var c=_createSuper(b);return(0,_createClass2.default)(b,[{key:"setSearch",value:function setSearch(a,b){var c=this,d=[];if(_type.default.is(a,"string")&&a.length)d=[[a,b]];else if(_type.default.is(a,"object"))d=Object.entries(a);else if(_type.default.is(a,"array"))d=a;else throw TypeError("\u53C2\u6570\u7C7B\u578B\u9519\u8BEF\uFF0C\u8BF7\u4F7F\u7528\u6B63\u786E\u7684\u53C2\u6570\u3002");d.forEach(function(a){var b=(0,_slicedToArray2.default)(a,2),d=b[0],e=b[1],f=null!==e&&void 0!==e?e:"";c.searchParams.set(d,_type.default.is(f,"string")?f:JSON.stringify(f))})}},{key:"appendSearch",value:function appendSearch(a,b){var c=this,d=[];if(_type.default.is(a,"string")&&a.length)d=[[a,b]];else if(_type.default.is(a,"object"))d=Object.entries(a);else if(_type.default.is(a,"array"))d=a;else throw TypeError("\u53C2\u6570\u7C7B\u578B\u9519\u8BEF\uFF0C\u8BF7\u4F7F\u7528\u6B63\u786E\u7684\u53C2\u6570\u3002");d.forEach(function(a){var b=(0,_slicedToArray2.default)(a,2),d=b[0],e=b[1],f=null!==e&&void 0!==e?e:"";c.searchParams.append(d,_type.default.is(f,"string")?f:JSON.stringify(f))})}},{key:"removeSearch",value:function removeSearch(){}}]),b}((0,_wrapNativeSuper2.default)(URL));exports.Uri=Uri,Object.defineProperty(Uri.prototype,Symbol.toStringTag,{value:"Uri"});var _default=Uri;exports.default=_default;