"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");require("core-js/modules/es.object.define-property.js");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.Serialize=void 0;var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray")),_slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray")),_classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));require("core-js/modules/es.array.iterator.js"),require("core-js/modules/es.object.to-string.js"),require("core-js/modules/es.string.iterator.js"),require("core-js/modules/es.weak-map.js"),require("core-js/modules/web.dom-collections.iterator.js"),require("core-js/modules/es.array.map.js"),require("core-js/modules/es.regexp.exec.js"),require("core-js/modules/es.string.split.js"),require("core-js/modules/es.string.replace.js"),require("core-js/modules/es.array.filter.js"),require("core-js/modules/es.array.find.js"),require("core-js/modules/es.array.find-index.js"),require("core-js/modules/es.array.splice.js"),require("core-js/modules/es.array.sort.js"),require("core-js/modules/es.array.join.js"),require("core-js/modules/web.dom-collections.for-each.js");var _type=_interopRequireDefault(require("@trz/type")),properties=new WeakMap,Serialize=function(){function a(b){(0,_classCallCheck2.default)(this,a);var c=b?b.split("&").map(function(a){return a.replace("=","&").split("&")}):[];properties.set(this,c)}return(0,_createClass2.default)(a,[{key:"append",value:function append(a,b){properties.get(this).push([a,b])}},{key:"delete",value:function _delete(){for(var a=properties.get(this),b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];for(var e=function(){var b=g[f];a=a.filter(function(a){var c=(0,_slicedToArray2.default)(a,1),d=c[0];return d!==b})},f=0,g=c;f<g.length;f++)e();properties.set(this,a)}},{key:"get",value:function get(a){return properties.get(this).find(function(b){var c=(0,_slicedToArray2.default)(b,1),d=c[0];return a===d})[1]}},{key:"getAll",value:function getAll(a){return properties.get(this).filter(function(b){var c=(0,_slicedToArray2.default)(b,1),d=c[0];return a===d}).map(function(a){var b=(0,_slicedToArray2.default)(a,2),c=b[1];return c})}},{key:"has",value:function has(a){return properties.get(this).some(function(b){var c=(0,_slicedToArray2.default)(b,1),d=c[0];return a===d})}},{key:"set",value:function set(a,b){var d,c=Math.min,e=properties.get(this);d=e.findIndex(function(b){var c=(0,_slicedToArray2.default)(b,1),d=c[0];return a===d}),e=e.filter(function(b){var c=(0,_slicedToArray2.default)(b,1),d=c[0];return a!==d}),d=~d?c(d,e.length):e.length,e.splice(d,0,[a,b]),properties.set(this,e)}},{key:"keys",value:function keys(){return properties.get(this).map(function(a){var b=(0,_slicedToArray2.default)(a,1),c=b[0];return c}).entries()}},{key:"values",value:function values(){return properties.get(this).map(function(a){var b=(0,_slicedToArray2.default)(a,2),c=b[1];return c}).entries()}},{key:"sort",value:function sort(){var a=properties.get(this);return properties.set(this,a.sort(function(a,b){var c=(0,_slicedToArray2.default)(a,1),d=c[0],e=(0,_slicedToArray2.default)(b,1),f=e[0];return d<f?-1:d>f?1:0})),this}},{key:"entries",value:function entries(){return properties.get(this).entries()}},{key:"toString",value:function toString(){return this.stringify()}},{key:"stringify",value:function stringify(){return properties.get(this).map(function(a){var b=(0,_slicedToArray2.default)(a,2),c=b[0],d=b[1];return _type.default.is(d,"undefined")?c:_type.default.is(d,"null")?c+"=":_type.default.some(d,["string","number","boolean","null"])?[c,d].join("="):c+"="+JSON.stringify(d)}).join("&")}},{key:"forEach",value:function forEach(a,b){var c=this;(0,_toConsumableArray2.default)(properties.get(this)).forEach(function(b){var d=(0,_slicedToArray2.default)(b,2),e=d[0],f=d[1];a.call(c,e,f,c)},b)}}]),a}();exports.Serialize=Serialize;var _default=Serialize;exports.default=_default;